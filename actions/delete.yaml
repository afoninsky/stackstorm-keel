# https://keel.sh/v1/guide/documentation.html#Managing-approvals-through-HTTP-endpoint
name: delete
runner_type: http-request
description: Delete approval of the image
enabled: true
parameters:
  headers:
    type: object
    default:
      Content-Type: application/json
    immutable: true
  timeout:
    type: integer
    default: 10
    immutable: true
  method:
    type: string
    default: POST
    immutable: true
  url:
    type: string
    default: "{{ config_context.host }}/v1/approvals"
    immutable: true
  body:
    type: string
    default: '{\"identifier\": \"{{ image }}:{{ tag }}\", \"action\": \"delete\", \"voter\":\{{ voter }}"\"}'
    immutable: true
  image:
    type: string
    required: true
  tag:
    type: string
    required: true
  voter:
    type: string
    required: true
    default: "{{ action_context.api_user }}"
